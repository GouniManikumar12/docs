---
title: "Recommendations API"
description: "Get intelligent product recommendations with a simple API call"
---

# Recommendations API

Get intelligent product recommendations with a simple API call.

## Quick Start

```bash
curl -X POST "https://api.useadmesh.com/agent/recommendations" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"query": "best CRM for startups", "agent_id": "your_agent_id"}'
```

<AccordionGroup>
  <Accordion title="Basic Request Format">

**Endpoint:** `POST https://api.useadmesh.com/agent/recommendations`

**Required Headers:**
```http
Authorization: Bearer YOUR_API_KEY
Content-Type: application/json
```

**Basic Request:**
```json
{
  "query": "best CRM for startups",
  "agent_id": "your_agent_id"
}
```

  </Accordion>

  <Accordion title="Advanced Parameters (Optional)">

```json
{
  "query": "best CRM for startups",
  "agent_id": "your_agent_id",
  "previous_query": "project management tools",
  "previous_summary": "We discussed project management solutions",
  "session_id": "user_session_123",
  "is_fallback_allowed": true,
  "format": "auto"
}
```

  </Accordion>
</AccordionGroup>

## Response Format

<AccordionGroup>
  <Accordion title="Example Response">

```json
{
  "response": {
    "recommendations": [
      {
        "title": "HubSpot CRM",
        "reason": "Perfect for startups with excellent free tier",
        "admesh_link": "https://useadmesh.com/track?ad_id=hubspot-123",
        "pricing": "Free tier available, paid plans from $45/month",
        "features": ["Contact Management", "Deal Tracking", "Email Integration"],
        "has_free_tier": true,
        "trial_days": 14
      }
    ]
  }
}
```

  </Accordion>

  <Accordion title="Complete Response Structure">

```json
{
  "session_id": "sess_1703123456_abc123",
  "intent": {
    "categories": ["crm", "software"],
    "goal": "Find the best CRM solution for startups",
    "llm_intent_confidence_score": 0.89
  },
  "response": {
    "summary": "Here are CRM tools that match your goal",
    "recommendations": [
      {
        "title": "HubSpot CRM",
        "reason": "Perfect for startups with excellent free tier",
        "intent_match_score": 0.92,
        "admesh_link": "https://useadmesh.com/track?ad_id=hubspot-123",
        "ad_id": "hubspot-123",
        "product_id": "hubspot-crm",
        "url": "https://hubspot.com",
        "description": "Free CRM with powerful features for small businesses",
        "pricing": "Free tier available, paid plans from $45/month",
        "trial_days": 14,
        "features": ["Contact Management", "Deal Tracking", "Email Integration"],
        "categories": ["crm", "sales"],
        "keywords": ["crm", "sales", "marketing"],
        "has_free_tier": true,
        "offer_trust_score": 0.95,
        "brand_trust_score": 0.92,
        "is_fallback": false
      }
    ],
    "is_fallback": false,
    "recommendation_source": "admesh"
  },
  "tokens_used": 500,
  "model_used": "mistralai/mistral-7b-instruct",
  "recommendation_id": "rec_uuid_123"
}
```

  </Accordion>

  <Accordion title="Request Parameters Reference">

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `query` | string | ✅ | User's search query or question |
| `agent_id` | string | ✅ | Your agent identifier |
| `format` | string | ❌ | Format type: `auto` (default), `product`, `conversation` |
| `previous_query` | string | ❌ | Previous query in conversation |
| `session_id` | string | ❌ | Session identifier for tracking |
| `is_fallback_allowed` | boolean | ❌ | Allow fallback recommendations (default: true) |

  </Accordion>
</AccordionGroup>

## Code Examples

<AccordionGroup>
  <Accordion title="JavaScript">

```javascript
const getRecommendations = async (query, agentId) => {
  const response = await fetch('https://api.useadmesh.com/agent/recommendations', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      query: query,
      agent_id: agentId
    })
  });

  if (!response.ok) {
    throw new Error(`API Error: ${response.status}`);
  }

  const data = await response.json();
  return data.recommendations;
};

// Usage
const recommendations = await getRecommendations('best CRM for startups', 'your_agent_id');
```

  </Accordion>

  <Accordion title="Python">

```python
import requests

def get_recommendations(query, agent_id):
    response = requests.post(
        'https://api.useadmesh.com/agent/recommendations',
        headers={'Authorization': 'Bearer YOUR_API_KEY'},
        json={
            'query': query,
            'agent_id': agent_id
        }
    )

    response.raise_for_status()
    data = response.json()
    return data['recommendations']

# Usage
recommendations = get_recommendations('best CRM for startups', 'your_agent_id')
```

  </Accordion>

  <Accordion title="PHP">

```php
<?php
function getRecommendations($query, $agentId) {
    $data = json_encode([
        'query' => $query,
        'agent_id' => $agentId
    ]);

    $context = stream_context_create([
        'http' => [
            'method' => 'POST',
            'header' => [
                'Authorization: Bearer YOUR_API_KEY',
                'Content-Type: application/json'
            ],
            'content' => $data
        ]
    ]);

    $response = file_get_contents('https://api.useadmesh.com/agent/recommendations', false, $context);
    $result = json_decode($response, true);
    return $result['recommendations'];
}

// Usage
$recommendations = getRecommendations('best CRM for startups', 'your_agent_id');
?>
```

  </Accordion>

  <Accordion title="Error Handling">

**Common Error Responses:**

- **400 Bad Request:** `{"detail": "Low intent confidence"}`
- **401 Unauthorized:** `{"detail": "Invalid API key"}`
- **500 Server Error:** `{"detail": "Failed to detect intent from query"}`

**JavaScript Error Handling:**
```javascript
try {
  const recommendations = await getRecommendations(query);
} catch (error) {
  console.error('Failed to get recommendations:', error.message);
  return []; // Return empty array as fallback
}
```

  </Accordion>
</AccordionGroup>

## What You Get

Each recommendation includes:
- **`title`** - Product/service name
- **`reason`** - Why it's recommended
- **`admesh_link`** - Tracking URL (use this for clicks)
- **`pricing`** - Cost information
- **`features`** - Key features list

<Accordion title="Complete Field Reference">

**Core Fields (Always Present):**
- `title`, `reason`, `intent_match_score`, `admesh_link`, `ad_id`, `product_id`

**Optional Fields:**
- `url`, `description`, `pricing`, `features`, `categories`, `keywords`
- `has_free_tier`, `trial_days`, `offer_trust_score`, `brand_trust_score`

</Accordion>

## Next Steps

<CardGroup cols={3}>
  <Card title="Quick Start Guide" icon="rocket" href="/quickstart">
    Step-by-step integration
  </Card>
  <Card title="Authentication" icon="key" href="/api/authentication">
    API key setup and security
  </Card>
  <Card title="Frontend Integration" icon="palette" href="/ui-sdk/installation">
    Display recommendations with React components
  </Card>
</CardGroup>
