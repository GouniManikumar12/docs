---
title: "Citation & Product Format"
description: "Display recommendations as inline citations or product cards with automatic tracking using admesh-ui-sdk"
---

## Overview

The **Citation & Product Format** is the easiest way to integrate AdMesh. Using `admesh-ui-sdk`, you get:

- **Zero-code rendering** - SDK handles all UI rendering automatically  
- **Automatic tracking** - impressions, clicks, and conversions tracked automatically  
- **Transparency labels** - `[Ad]` labels added automatically for compliance  
- **Session aware** - uses your existing session and message IDs, with helper methods available if you do not have them  
- **Multiple formats** - citation, product cards, and more  

**Setup time:** 5-10 minutes | **Code complexity:** Minimal

---

## Quick Start

<Steps>
  <Step title="Install the SDK">
    ```bash
    npm install admesh-ui-sdk
    ```
  </Step>

  <Step title="Initialize the SDK">
    ```tsx
    import { AdMeshSDK } from 'admesh-ui-sdk';

    const admesh = new AdMeshSDK({
      apiKey: 'your-api-key'
    });
    ```
  </Step>

  <Step title="Add Container">
    ```html
    <div id="admesh-recommendations"></div>
    ```
  </Step>

  <Step title="Render Recommendations">
    ```tsx
    // Pass your own sessionId and messageId for accurate attribution
    await admesh.showRecommendations({
      query: 'best project management tools',
      containerId: 'admesh-recommendations',
      format: 'citation',
      sessionId: 'your-session-id',
      messageId: 'your-message-id'
    });
    ```
  </Step>
</Steps>

---

## Format Types

### Citation Format

Displays a summary with embedded product links. Ideal for conversational interfaces.

```tsx
await admesh.showRecommendations({
  query: 'best project management tools',
  containerId: 'admesh-recommendations',
  format: 'citation',
  sessionId: 'your-session-id',
  messageId: 'your-message-id'
});
```

**Output:**
```
"Consider [HubSpot](url) for CRM needs or [Asana](url) for project management."
```

---

### Product Format

Displays product recommendation cards with key details. Suitable for SaaS or software listings.

```tsx
await admesh.showRecommendations({
  query: 'best CRM software',
  containerId: 'admesh-recommendations',
  format: 'product',
  sessionId: 'your-session-id',
  messageId: 'your-message-id'
});
```

---

## Session Management

AdMesh does not manage user sessions automatically.  
It integrates with your platform's existing session and message lifecycle.

When calling the SDK, pass your own `sessionId` and `messageId` to maintain continuity across user interactions.

```tsx
await admesh.showRecommendations({
  query: 'best project management tools',
  containerId: 'admesh-recommendations',
  format: 'citation',
  sessionId: 'your-session-id',
  messageId: 'your-message-id'
});
```

If your platform does not use sessions yet, helper methods are available.

```tsx
import { AdMeshSDK } from 'admesh-ui-sdk';

const admesh = new AdMeshSDK({ apiKey: 'your-api-key' });

// Generate IDs when you do not have your own
const sessionId = admesh.createNewSession();
const messageId = admesh.createNewMessage();

// Optionally set or retrieve IDs
admesh.setSessionId(sessionId);
const currentSession = admesh.getSessionId();
```

> **Best practice:** always pass your own `sessionId` and `messageId` when available. This ensures accurate tracking, attribution, and context continuity.

---

## Customization

### Theme Customization

```tsx
import { AdMeshSDK, mergeTheme, injectCustomTheme } from 'admesh-ui-sdk';

const theme = mergeTheme({
  mode: 'dark',
  primaryColor: '#3b82f6',
  accentColor: '#ffffff',
  borderRadius: '0.5rem'
});

injectCustomTheme(theme);

const admesh = new AdMeshSDK({
  apiKey: 'your-api-key'
});
```

---

### Event Handlers

```tsx
await admesh.showRecommendations({
  query: 'best tools',
  containerId: 'admesh-recommendations',
  format: 'citation',
  sessionId: 'your-session-id',
  messageId: 'your-message-id',
  onRecommendationClick: (recommendation) => {
    console.log('User clicked:', recommendation.title);
  },
  onLinkClick: (url) => {
    console.log('User clicked link:', url);
  }
});
```

---

## Automatic Tracking

The SDK automatically manages:

1. **Exposure tracking** - when recommendations are rendered  
2. **Click tracking** - when users engage with recommendations  
3. **Conversion tracking** - if configured  
4. **Transparency labels** - `[Ad]` automatically added  

No additional setup is required.

---

## Complete Integration Example

```tsx
import React, { useState, useEffect } from 'react';
import { AdMeshSDK } from 'admesh-ui-sdk';

function ChatWithRecommendations() {
  const [query, setQuery] = useState('');
  const [admesh, setAdmesh] = useState<AdMeshSDK | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const sdk = new AdMeshSDK({ apiKey: 'your-api-key' });
    setAdmesh(sdk);
  }, []);

  const showRecommendations = async () => {
    if (!query.trim() || !admesh) return;

    setLoading(true);
    setError(null);

    try {
      await admesh.showRecommendations({
        query,
        containerId: 'admesh-recommendations',
        format: 'citation',
        sessionId: 'your-session-id',
        messageId: 'your-message-id'
      });
    } catch {
      setError('Failed to load recommendations. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="chat-container">
      <div className="chat-input">
        <input
          type="text"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && showRecommendations()}
          placeholder="Ask for product recommendations..."
          disabled={loading || !admesh}
        />
        <button
          onClick={showRecommendations}
          disabled={loading || !query.trim() || !admesh}
        >
          {loading ? 'Loading...' : 'Get Recommendations'}
        </button>
      </div>

      {error && <div className="error-message">{error}</div>}

      <div id="admesh-recommendations" />
    </div>
  );
}

export default ChatWithRecommendations;
```

---

## Best Practices

✅ **DO:**
- Pass your own `sessionId` and `messageId`  
- Use the SDK for rendering and tracking  
- Customize themes to match your brand  
- Use separate sessions for each conversation or search  

❌ **DON'T:**
- Manually trigger tracking events  
- Modify or remove transparency labels  
- Render recommendations outside the container  
- Reuse session IDs across conversations  

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Recommendations Not Showing">
    **Possible causes:**
    - Container element missing  
    - API key not configured  
    - Invalid query  

    ```tsx
    const admesh = new AdMeshSDK({ apiKey: 'your-api-key' });
    const container = document.getElementById('admesh-recommendations');
    if (!container) console.error('Container not found');
    ```
  </Accordion>

  <Accordion title="API Key Issues">
    **Possible causes:**
    - Missing or invalid key  
    - Environment variable misconfigured  

    ```tsx
    const admesh = new AdMeshSDK({ apiKey: 'your-api-key' });
    ```
  </Accordion>

  <Accordion title="Tracking Not Working">
    Tracking is managed automatically by the SDK.  
    Do not modify tracking logic or URLs manually.
  </Accordion>

  <Accordion title="Session Management Issues">
    **Possible causes:**
    - Session expired  
    - Multiple SDK instances  

    ```tsx
    const admesh = new AdMeshSDK({ apiKey: 'your-api-key' });
    const sessionId = admesh.getSessionId();
    admesh.createNewSession();
    admesh.closeSession();
    ```
  </Accordion>
</AccordionGroup>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Installation Guide" icon="download" href="/ui-sdk/installation">
    Complete SDK installation and setup
  </Card>
  <Card title="FAQ" icon="question" href="/platforms/faq">
    Common questions and troubleshooting
  </Card>
</CardGroup>
