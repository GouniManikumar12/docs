---
title: "API Reference"
description: "Complete API reference for AdMesh React SDK"
---

# API Reference

## Types

### Recommendation

```tsx
interface Recommendation {
  id: string;
  title: string;
  description: string;
  image_url?: string;
  url: string;
  price?: number;
  rating?: number;
  source?: string;
  admesh_link?: string;
  [key: string]: any;
}
```

### ViewabilityMetrics

```tsx
interface ViewabilityMetrics {
  score: number;                      // Visibility percentage (0-100)
  duration: number;                   // Time visible in milliseconds
  timestamp: number;                  // When metrics were recorded
  intersection_ratio_peak?: number;   // Peak visibility ratio
  exposure_start_timestamp?: number;  // When element became visible
  exposure_end_timestamp?: number;    // When element became invisible
  mrc_compliant?: boolean;            // ≥50% visible for ≥1000ms
}
```

### AdMeshSDKConfig

```tsx
interface AdMeshSDKConfig {
  apiKey: string;
  apiBaseUrl?: string;
  debug?: boolean;
  viewabilityConfig?: {
    threshold: number;  // 0-100
    duration: number;   // milliseconds
  };
}
```

### RecommendationQuery

```tsx
interface RecommendationQuery {
  query: string;
  limit?: number;
  category?: string;
  maxPrice?: number;
  minRating?: number;
}
```

### TrackingEvent

```tsx
interface TrackingEvent {
  event_type: 'exposure' | 'click' | 'conversion';
  ad_id: string;
  session_id: string;
  timestamp?: number;
  metadata?: Record<string, any>;
}
```

## Hooks

### useRecommendations

```tsx
function useRecommendations(
  options: UseRecommendationsOptions
): UseRecommendationsReturn
```

**Options:**
```tsx
interface UseRecommendationsOptions {
  query: string;
  limit?: number;
  category?: string;
  maxPrice?: number;
  minRating?: number;
  enabled?: boolean;
}
```

**Return:**
```tsx
interface UseRecommendationsReturn {
  recommendations: Recommendation[];
  loading: boolean;
  error: Error | null;
  refetch: () => Promise<void>;
}
```

### useViewabilityTracker

```tsx
function useViewabilityTracker(
  options?: UseViewabilityTrackerOptions
): UseViewabilityTrackerReturn
```

**Options:**
```tsx
interface UseViewabilityTrackerOptions {
  threshold?: number;
  duration?: number;
  onVisible?: (metrics: ViewabilityMetrics) => void;
}
```

**Return:**
```tsx
interface UseViewabilityTrackerReturn {
  ref: React.RefObject<HTMLDivElement>;
  isVisible: boolean;
  metrics: ViewabilityMetrics | null;
}
```

### useAdMesh

```tsx
function useAdMesh(): AdMeshContextType
```

**Return:**
```tsx
interface AdMeshContextType {
  apiKey: string;
  apiBaseUrl: string;
  viewabilityConfig: ViewabilityConfig;
  debug: boolean;
  fetchRecommendations: (query: RecommendationQuery) => Promise<Recommendation[]>;
  trackEvent: (event: TrackingEvent) => Promise<void>;
}
```

### useAnalytics

```tsx
function useAnalytics(): AnalyticsContextType
```

**Return:**
```tsx
interface AnalyticsContextType {
  trackExposure: (event: TrackingEvent) => Promise<void>;
  trackClick: (event: TrackingEvent) => Promise<void>;
  trackConversion: (event: TrackingEvent) => Promise<void>;
  getMetrics: () => AnalyticsMetrics;
}
```

## Components

### AdMeshProvider

```tsx
<AdMeshProvider config={config}>
  {children}
</AdMeshProvider>
```

### RecommendationCard

```tsx
<RecommendationCard
  recommendation={rec}
  onClick={handler}
  onTrack={handler}
  showRating={true}
  showPrice={true}
  className="custom-class"
/>
```

### RecommendationGrid

```tsx
<RecommendationGrid
  recommendations={recs}
  columns={3}
  loading={false}
  error={null}
  onCardClick={handler}
  onTrack={handler}
  gap="1rem"
  className="custom-class"
/>
```

## Constants

### VERSION

```tsx
import { VERSION } from '@admesh/react-sdk';
console.log(VERSION); // "1.0.0"
```

## Utility Functions

### generateSessionId

```tsx
import { generateSessionId } from '@admesh/react-sdk';
const sessionId = generateSessionId(); // "session_abc123xyz"
```

### getDeviceType

```tsx
import { getDeviceType } from '@admesh/react-sdk';
const device = getDeviceType(); // "mobile" | "tablet" | "desktop"
```

### getOSType

```tsx
import { getOSType } from '@admesh/react-sdk';
const os = getOSType(); // "ios" | "android" | "windows" | "macos" | "linux"
```

## Error Handling

All async functions throw errors that can be caught:

```tsx
try {
  const recs = await fetchRecommendations({ query: 'laptop' });
} catch (error) {
  if (error instanceof Error) {
    console.error('Error:', error.message);
  }
}
```

## Next Steps

- [Examples](/react-sdk/examples)
- [Best Practices](/react-sdk/best-practices)
- [Troubleshooting](/react-sdk/troubleshooting)

