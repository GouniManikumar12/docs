---
title: "UI SDK Installation"
description: "Install and set up admesh-ui-sdk for automatic recommendation rendering and tracking"
---

## Quick Start

Get started with AdMesh in 3 simple steps:

<Steps>
  <Step title="Install the Package">
    ```bash
    npm install admesh-ui-sdk@latest
    ```
  </Step>

  <Step title="Wrap Your App with AdMeshProvider">
    ```tsx
    import { AdMeshProvider } from 'admesh-ui-sdk';

    <AdMeshProvider apiKey="your-api-key" sessionId={sessionId}>
      <YourApp />
    </AdMeshProvider>
    ```

    The provider initializes the SDK and manages your session context.
  </Step>

  <Step title="Choose Your Integration Format">
    Select the format that matches your use case:

    **Citation & Product Format** - Separate recommendations panel
    ```tsx
    import { AdMeshRecommendations } from 'admesh-ui-sdk';

    <AdMeshRecommendations messages={messages} format="citation" />
    ```

    **Weave Ad Format** - Embedded links in LLM responses
    ```tsx
    import { WeaveAdFormatContainer } from 'admesh-ui-sdk';

    <WeaveAdFormatContainer
      messageId={message.messageId}
      query={userQuery}
      fallbackFormat="citation"
    >
      <YourLLMResponse />
    </WeaveAdFormatContainer>
    ```
  </Step>
</Steps>

---

## Core Concepts

### Session Management

AdMesh uses sessions to track user interactions across multiple messages:

- **Session ID**: Unique identifier for a user's conversation session
- **Message ID**: Unique identifier for each individual message/query

```tsx
// Generate a session ID when user starts a conversation
const sessionId = crypto.randomBytes(16).toString('hex');

// Generate a message ID for each query
const messageId = crypto.randomBytes(7).toString('hex');
```

<Note>
Your application is responsible for generating and managing session and message IDs. The SDK accepts these IDs but does not generate them.
</Note>

### Available Formats

AdMesh supports three recommendation formats:

| Format | Use Case | Component |
|--------|----------|-----------|
| **Citation** | Inline citations with product links | `AdMeshRecommendations` |
| **Product** | Product cards with details | `AdMeshRecommendations` |
| **Weave** | Embedded links in LLM responses | `WeaveAdFormatContainer` |

---

## Core Components

### AdMeshProvider

Context provider that initializes the SDK and manages session state. **Required** - wrap your entire app with this component.

```typescript
interface AdMeshProviderProps {
  apiKey: string;            // Your AdMesh API key
  sessionId: string;         // Current session ID
  theme?: AdMeshTheme;       // Optional: Custom theme
  children: React.ReactNode; // Your app components
}
```

**Example:**
```tsx
import { AdMeshProvider } from 'admesh-ui-sdk';

<AdMeshProvider apiKey="your-api-key" sessionId={sessionId}>
  <ChatInterface />
</AdMeshProvider>
```

---

### AdMeshRecommendations

Displays recommendations in a separate panel. Use for **Citation** or **Product** format.

```typescript
interface AdMeshRecommendationsProps {
  messages: Message[];                    // Array of messages
  format: 'citation' | 'product';         // Display format
  onRecommendationsShown?: (messageId: string) => void;
  onError?: (error: Error) => void;
}
```

**Example:**
```tsx
import { AdMeshRecommendations } from 'admesh-ui-sdk';

<AdMeshRecommendations
  messages={messages}
  format="citation"
/>
```

<Card title="Citation & Product Format Guide" icon="list" href="/platforms/citation-format">
  Complete integration guide for Citation & Product Format
</Card>

---

### WeaveAdFormatContainer

Wraps LLM response content and detects embedded AdMesh links. Use for **Weave Ad Format**.

```typescript
interface WeaveAdFormatContainerProps {
  messageId: string;                      // Assistant message ID
  query: string;                          // User's query
  fallbackFormat: 'citation' | 'product'; // Fallback format if no links found
  children: React.ReactNode;              // LLM response content
  onLinksDetected?: (count: number) => void;
  onNoLinksDetected?: () => void;
  onError?: (error: Error) => void;
}
```

**Example:**
```tsx
import { WeaveAdFormatContainer } from 'admesh-ui-sdk';

<WeaveAdFormatContainer
  messageId={message.messageId}
  query={userQuery}
  fallbackFormat="citation"
>
  <Markdown>{message.content}</Markdown>
</WeaveAdFormatContainer>
```

<Card title="Weave Ad Format Guide" icon="link" href="/platforms/weave-ad-format">
  Complete integration guide for Weave Ad Format with event-driven architecture
</Card>

---

### Streaming Event Utilities

For **Weave Ad Format** only - dispatch events to coordinate link detection with streaming responses.

```typescript
// Dispatch when streaming starts
dispatchStreamingStartEvent(messageId: string, sessionId: string): void

// Dispatch when streaming completes
dispatchStreamingCompleteEvent(messageId: string, sessionId: string, metadata?: object): void
```

**Example:**
```tsx
import {
  dispatchStreamingStartEvent,
  dispatchStreamingCompleteEvent
} from 'admesh-ui-sdk';

// When assistant message ID received from backend
dispatchStreamingStartEvent(assistantMessageId, sessionId);

// When streaming completes
dispatchStreamingCompleteEvent(assistantMessageId, sessionId);
```

<Note>
These utilities are only needed for Weave Ad Format. See the [Weave Ad Format guide](/platforms/weave-ad-format) for complete integration details.
</Note>

---

## Installation Methods

<AccordionGroup>
  <Accordion title="npm (recommended)">
    ```bash
    npm install admesh-ui-sdk@latest
    ```
  </Accordion>
  <Accordion title="Yarn">
    ```bash
    yarn add admesh-ui-sdk@latest
    ```
  </Accordion>
  <Accordion title="pnpm">
    ```bash
    pnpm add admesh-ui-sdk@latest
    ```
  </Accordion>
</AccordionGroup>

---

## Requirements

<CardGroup cols={2}>
  <Card title="React 16.8+" icon="react">
    Requires React with Hooks support
  </Card>
  <Card title="API Key" icon="key">
    Get your API key from the AdMesh dashboard
  </Card>
  <Card title="TypeScript" icon="code">
    Full TypeScript support included
  </Card>
  <Card title="Modern Browser" icon="browser">
    Supports all modern browsers (Chrome, Firefox, Safari, Edge)
  </Card>
</CardGroup>

---

## TypeScript Support

The SDK is written in TypeScript and includes full type definitions:

```typescript
import type {
  AdMeshProviderProps,
  AdMeshRecommendationsProps,
  WeaveAdFormatContainerProps,
  Message
} from 'admesh-ui-sdk';
```

All components and utilities are fully typed for the best developer experience.

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Recommendations not showing">
    **Check:**
    - API key is valid and provided to `AdMeshProvider`
    - `sessionId` is provided to `AdMeshProvider`
    - Component is wrapped inside `AdMeshProvider`
    - Messages array is not empty (for `AdMeshRecommendations`)
    - Network requests are not blocked by CORS or ad blockers
  </Accordion>

  <Accordion title="TypeScript errors">
    **Solution:**
    - Ensure you're using TypeScript 4.0 or higher
    - Import types explicitly: `import type { Message } from 'admesh-ui-sdk'`
    - Check that your `tsconfig.json` includes `"moduleResolution": "node"`
  </Accordion>

  <Accordion title="Weave Ad Format not detecting links">
    **Check:**
    - You're dispatching `streamingStart` and `streamingComplete` events
    - Events use the assistant message ID (from backend), not user message ID
    - Links are in the correct format (AdMesh tracking URLs)
    - See the [Weave Ad Format troubleshooting guide](/platforms/weave-ad-format#troubleshooting)
  </Accordion>

  <Accordion title="Tracking not working">
    **Note:** Tracking is fully automatic. Do NOT:
    - Manually fire tracking pixels
    - Modify tracking URLs
    - Implement custom tracking logic

    The SDK handles all tracking internally.
  </Accordion>
</AccordionGroup>

---

## Next Steps

Choose your integration format and follow the detailed guide:

<CardGroup cols={2}>
  <Card title="Citation & Product Format" icon="list" href="/platforms/citation-format">
    Display recommendations in a separate panel

    **Best for:** Separate recommendations UI, simple integration

    **Setup time:** 5-10 minutes
  </Card>

  <Card title="Weave Ad Format" icon="link" href="/platforms/weave-ad-format">
    Embed recommendations directly in LLM responses

    **Best for:** Natural integration, conversational ads

    **Setup time:** 15-20 minutes
  </Card>
</CardGroup>

---

## Additional Resources

<CardGroup cols={3}>
  <Card title="API Reference" icon="book" href="/ui-sdk/api-reference">
    Complete API documentation
  </Card>

  <Card title="Examples" icon="code" href="/ui-sdk/examples">
    Code examples and patterns
  </Card>

  <Card title="Support" icon="question" href="mailto:support@useadmesh.com">
    Get help from our team
  </Card>
</CardGroup>
