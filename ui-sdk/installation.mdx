---
title: "UI SDK Installation"
description: "Install and set up the AdMesh UI SDK for automatic recommendation rendering and tracking"
---

## Quick Installation

<Steps>
  <Step title="Install the Package">
    ```bash
    npm install admesh-ui-sdk
    ```
  </Step>
  <Step title="Initialize the SDK">
    ```tsx
    import { AdMeshSDK } from 'admesh-ui-sdk';

    const admesh = new AdMeshSDK({
      apiKey: process.env.REACT_APP_ADMESH_API_KEY,
      debug: false
    });
    ```
  </Step>
  <Step title="Render Recommendations">
    ```tsx
    // Create a container element
    <div id="admesh-recommendations"></div>

    // Render recommendations (SDK handles session automatically)
    await admesh.showRecommendations({
      query: 'best CRM software',
      containerId: 'admesh-recommendations',
      format: 'auto'
    });
    ```
  </Step>
</Steps>

## Package Requirements

<CardGroup cols={2}>
  <Card title="API Key" icon="key">
    AdMesh API key (get from dashboard)
  </Card>
  <Card title="TypeScript" icon="code">
    Full TypeScript support included
  </Card>
</CardGroup>

## Installation Methods

<AccordionGroup>
  <Accordion title="npm">
    ```bash
    npm install admesh-ui-sdk
    ```
  </Accordion>

  <Accordion title="Yarn">
    ```bash
    yarn add admesh-ui-sdk
    ```
  </Accordion>

  <Accordion title="pnpm">
    ```bash
    pnpm add admesh-ui-sdk
    ```
  </Accordion>
</AccordionGroup>

## Format Types

The `format` parameter in `showRecommendations()` controls how recommendations are displayed:

<AccordionGroup>
  <Accordion title="Auto Format">
    Automatically selects the best layout based on content type:
    ```tsx
    await admesh.showRecommendations({
      query: 'best CRM software',
      containerId: 'admesh-recommendations',
      format: 'auto'
    });
    ```
  </Accordion>

  <Accordion title="Product Format">
    Displays software/SaaS recommendations as detailed product cards:
    ```tsx
    await admesh.showRecommendations({
      query: 'best CRM software',
      containerId: 'admesh-recommendations',
      format: 'product'
    });
    ```
  </Accordion>

  <Accordion title="Ecommerce Format">
    Displays physical product recommendations optimized for shopping:
    ```tsx
    await admesh.showRecommendations({
      query: 'laptop under 1000',
      containerId: 'admesh-recommendations',
      format: 'ecommerce'
    });
    ```
  </Accordion>

  <Accordion title="Citation Format">
    Inline citations perfect for AI assistants and conversational interfaces:
    ```tsx
    await admesh.showRecommendations({
      query: 'best ad networks',
      containerId: 'admesh-recommendations',
      format: 'citation'
    });
    ```
  </Accordion>
</AccordionGroup>

## Advanced Configuration

### Custom Theming

Use the theming API for programmatic customization:

```tsx
import {
  AdMeshSDK,
  mergeTheme,
  injectCustomTheme
} from 'admesh-ui-sdk';

// Create custom theme
const theme = mergeTheme({
  mode: 'dark',
  primaryColor: '#3b82f6',
  accentColor: '#ffffff',
  borderRadius: '0.5rem'
});

// Inject globally
injectCustomTheme(theme);

// Initialize SDK
const admesh = new AdMeshSDK({
  apiKey: process.env.REACT_APP_ADMESH_API_KEY
});

// Render with theme (automatically applied)
await admesh.showRecommendations({
  query: 'best CRM software',
  containerId: 'admesh-recommendations',
  format: 'auto'
});
```

### Error Handling

```tsx
const handleSearch = async (query: string) => {
  try {
    await admesh.showRecommendations({
      query,
      containerId: 'admesh-recommendations',
      format: 'auto'
    });
  } catch (error) {
    console.error('Failed to render recommendations:', error);
    // Show error message to user
    setError('Failed to load recommendations. Please try again.');
  }
};
```

### Session Management

The SDK handles session management automatically, but you can also control it manually:

```tsx
import { AdMeshSDK } from 'admesh-ui-sdk';

const admesh = new AdMeshSDK({
  apiKey: process.env.REACT_APP_ADMESH_API_KEY
});

// Get current session ID (auto-created on first use)
const sessionId = admesh.getSessionId();

// Create a new session (e.g., for a new conversation)
const newSessionId = admesh.createNewSession();

// Set a custom session ID
admesh.setSessionId('custom-session-id');

// Close session when done
admesh.closeSession();
```


```tsx
import React, { useState, useEffect } from 'react';
import { AdMeshSDK } from 'admesh-ui-sdk';

function SearchWithRecommendations() {
  const [query, setQuery] = useState('');
  const [admesh, setAdmesh] = useState<AdMeshSDK | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Initialize SDK once on mount
  useEffect(() => {
    const sdk = new AdMeshSDK({
      apiKey: process.env.REACT_APP_ADMESH_API_KEY,
      debug: false
    });
    setAdmesh(sdk);

    // Cleanup: close session when component unmounts
    return () => {
      sdk.closeSession();
    };
  }, []);

  const searchRecommendations = async () => {
    if (!query.trim() || !admesh) return;

    setLoading(true);
    setError(null);

    try {
      // SDK automatically handles session management and tracking
      await admesh.showRecommendations({
        query,
        containerId: 'admesh-recommendations',
        format: 'auto'
      });
    } catch (err) {
      console.error('Failed to render recommendations:', err);
      setError('Failed to load recommendations. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="search-container">
      <div className="search-input">
        <input
          type="text"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && searchRecommendations()}
          placeholder="Search for products or services..."
          disabled={loading || !admesh}
        />
        <button
          onClick={searchRecommendations}
          disabled={loading || !query.trim() || !admesh}
        >
          {loading ? 'Searching...' : 'Search'}
        </button>
      </div>

      {error && (
        <div className="error-message">
          {error}
        </div>
      )}

      <div id="admesh-recommendations" />
    </div>
  );
}

export default SearchWithRecommendations;
```

## TypeScript Support

The UI SDK includes full TypeScript definitions:

```typescript
import { AdMeshSDK } from 'admesh-ui-sdk';

interface ShowRecommendationsOptions {
  query: string;
  containerId: string;
  format?: 'auto' | 'citation' | 'product' | 'ecommerce';
  previousQuery?: string;
  previousSummary?: string;
}

const admesh = new AdMeshSDK({
  apiKey: process.env.REACT_APP_ADMESH_API_KEY
});

// Fully typed method call (session managed automatically)
await admesh.showRecommendations({
  query: 'best CRM software',
  containerId: 'admesh-recommendations',
  format: 'auto'
});
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Recommendations Not Rendering">
    **Common causes:**
    - Container element not found
    - API key not configured
    - Invalid query

    **Solutions:**
    ```tsx
    // Enable debug mode to see detailed logs
    const admesh = new AdMeshSDK({
      apiKey: process.env.REACT_APP_ADMESH_API_KEY,
      debug: true  // Enable debug logging
    });

    // Verify container exists
    const container = document.getElementById('admesh-recommendations');
    if (!container) {
      console.error('Container element not found');
    }

    // Check session ID
    console.log('Session ID:', admesh.getSessionId());
    ```
  </Accordion>

  <Accordion title="API Key Issues">
    **Common causes:**
    - Missing API key
    - Invalid API key format
    - API key not passed correctly

    **Solutions:**
    ```tsx
    // Verify API key is set
    const apiKey = process.env.REACT_APP_ADMESH_API_KEY;
    if (!apiKey) {
      console.error('REACT_APP_ADMESH_API_KEY not set');
    }

    // Check API key format
    if (!apiKey.startsWith('admesh_')) {
      console.error('Invalid API key format');
    }

    // Initialize with valid key
    const admesh = new AdMeshSDK({
      apiKey: apiKey,
      apiBaseUrl: 'https://api.useadmesh.com'
    });
    ```
  </Accordion>

  <Accordion title="Session Management Issues">
    **Common causes:**
    - Session creation failed
    - Session expired
    - Session ID not stored

    **Solutions:**
    ```tsx
    // Create session with error handling
    const createSession = async () => {
      try {
        const response = await fetch('https://api.useadmesh.com/agent/session/new', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            agent_id: 'your-agent-id'
          })
        });

        if (!response.ok) {
          throw new Error(`Session creation failed: ${response.statusText}`);
        }

        const data = await response.json();
        localStorage.setItem('admesh_session_id', data.session_id);
        return data.session_id;
      } catch (error) {
        console.error('Failed to create session:', error);
      }
    };

    // Restore session from localStorage
    const getOrCreateSession = async () => {
      let sessionId = localStorage.getItem('admesh_session_id');
      if (!sessionId) {
        sessionId = await createSession();
      }
      return sessionId;
    };
    ```
  </Accordion>

  <Accordion title="Tracking Not Working">
    **Important:** The SDK handles all tracking automatically. You should NOT:
    - Manually fire exposure pixels
    - Modify tracking URLs
    - Remove transparency labels

    If tracking isn't working:
    ```tsx
    // Enable debug mode to see tracking events
    const admesh = new AdMeshSDK({
      apiKey: 'your-api-key',
      apiBaseUrl: 'https://api.useadmesh.com',
      debug: true
    });

    // Check browser console for tracking logs
    // Verify network requests in DevTools Network tab
    ```
  </Accordion>
</AccordionGroup>

---
## Next Steps

<CardGroup cols={3}>
  <Card title="Integration Guide" icon="layout" href="/ui-sdk/layout-component">
    Complete integration patterns and examples
  </Card>
  <Card title="Customization" icon="palette" href="/ui-sdk/customization">
    Styling and theming guide
  </Card>
  <Card title="API Reference" icon="book" href="/api/recommendations">
    Complete API documentation
  </Card>
</CardGroup>
