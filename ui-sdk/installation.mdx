---
title: "UI SDK Installation"
description: "Install and set up the AdMesh UI SDK v1.0.0 for automatic recommendation rendering and tracking"
---

## Quick Installation - Provider Pattern (Recommended)

The **Provider Pattern** is the simplest way to integrate AdMesh. It reduces integration complexity by **97%** compared to manual SDK initialization.

<Steps>
  <Step title="Install the Package">
    ```bash
    npm install admesh-ui-sdk@latest
    ```
  </Step>
  <Step title="Wrap with AdMeshProvider">
    ```tsx
    import { AdMeshProvider } from 'admesh-ui-sdk';

    <AdMeshProvider
      apiKey={process.env.REACT_APP_ADMESH_API_KEY}
      sessionId={sessionId}
    >
      <YourApp />
    </AdMeshProvider>
    ```

    This initializes the SDK and manages your session.
  </Step>
  <Step title="Add Your Format Component">
    Choose ONE based on your needs:

    **For Citation/Product Format:**
    ```tsx
    import { AdMeshRecommendations } from 'admesh-ui-sdk';

    <AdMeshRecommendations messages={messages} format="citation" />
    ```

    **For Weave Ad Format:**
    ```tsx
    import { WeaveAdFormatContainer, AdMeshRecommendations } from 'admesh-ui-sdk';

    <WeaveAdFormatContainer
      messageId={msg.id}
      fallbackUI={<AdMeshRecommendations messages={[msg]} format="citation" />}
    >
      {msg.content}
    </WeaveAdFormatContainer>
    ```
  </Step>
  <Step title="Done!">
    That's it! The SDK automatically:
    - Initializes the SDK
    - Detects new messages
    - Fetches recommendations
    - Shows recommendations
    - Tracks exposures and clicks
  </Step>
</Steps>

---

## API Reference

### AdMeshProvider - State Management

Initializes the SDK and manages your session. Wrap your entire app with this.

```typescript
interface AdMeshProviderProps {
  apiKey: string;           // Required: Your AdMesh API key
  sessionId: string;        // Required: Session ID for tracking
  theme?: AdMeshTheme;      // Optional: Custom theme configuration
  children: React.ReactNode; // Required: Child components
}
```

**Example:**
```tsx
<AdMeshProvider apiKey="your-key" sessionId="session-123">
  <YourApp />
</AdMeshProvider>
```

---

### AdMeshRecommendations - Citation & Product Formats

Displays recommendations as a separate UI component. Use for Citation or Product format.

```typescript
interface AdMeshRecommendationsProps {
  messages: Message[];                           // Required: Array of messages
  format?: 'citation' | 'product';               // Required: Display format
  onRecommendationsShown?: (messageId: string) => void;  // Optional: Callback when shown
  onError?: (error: Error) => void;              // Optional: Error callback
}
```

**Example:**
```tsx
<AdMeshRecommendations
  messages={messages}
  format="citation"
/>
```

---

### WeaveAdFormatContainer - Weave Ad Format

Wraps your LLM response content and automatically detects AdMesh links. Use for Weave format.

```typescript
interface WeaveAdFormatContainerProps {
  messageId: string;                    // Required: Unique message ID
  fallbackUI?: React.ReactNode;         // Optional: UI to show if no links detected
  children: React.ReactNode;            // Required: Your content (LLM response)
}
```

**Example:**
```tsx
<WeaveAdFormatContainer
  messageId="msg-123"
  fallbackUI={<AdMeshRecommendations messages={[msg]} format="citation" />}
>
  {msg.content}
</WeaveAdFormatContainer>
```

### useAdMesh Hook

```typescript
const {
  sdk,                    // AdMeshSDK instance
  sessionId,              // Session ID
  apiKey,                 // API key
  theme,                  // Theme configuration
  processedMessageIds,    // Set of processed message IDs
  markMessageAsProcessed, // Function to mark message as processed
  isMessageProcessed      // Function to check if message was processed
} = useAdMesh();
```

---

## Package Requirements

<CardGroup cols={2}>
  <Card title="API Key" icon="key">
    AdMesh API key (get from dashboard)
  </Card>
  <Card title="TypeScript" icon="code">
    Full TypeScript support included
  </Card>
</CardGroup>

## Installation Methods

<AccordionGroup>
  <Accordion title="npm">
    ```bash
    npm install admesh-ui-sdk
    ```
  </Accordion>
  <Accordion title="Yarn">
    ```bash
    yarn add admesh-ui-sdk
    ```
  </Accordion>
  <Accordion title="pnpm">
    ```bash
    pnpm add admesh-ui-sdk
    ```
  </Accordion>
</AccordionGroup>
---

## Format Types

The `AdMeshRecommendations` component supports two display formats:

| Format | Description | Best For |
|---------|-------------|----------|
| **citation** | Inline citations with product links | Conversational interfaces, chat apps |
| **product** | Product cards with details | SaaS/software recommendations |

## Weave Ad Format (Advanced)

For integrating recommendations directly into LLM responses, use the `WeaveAdFormatContainer` component:

```tsx
import { WeaveAdFormatContainer, AdMeshRecommendations } from 'admesh-ui-sdk';

<WeaveAdFormatContainer
  messageId={message.id}
  fallbackUI={
    <AdMeshRecommendations
      messages={[message]}
      format="citation"
    />
  }
>
  {/* Your LLM response content */}
  {message.content}
</WeaveAdFormatContainer>
```

This component:
- Automatically detects AdMesh links in your content
- Adds `[Ad]` labels for transparency
- Fires exposure pixels when links are detected
- Shows fallback recommendations if no links are found

---

## Advanced Configuration

### Theming

```tsx
import { AdMeshSDK, mergeTheme, injectCustomTheme } from 'admesh-ui-sdk';

const theme = mergeTheme({
  mode: 'dark',
  primaryColor: '#3b82f6',
  borderRadius: '0.5rem'
});

injectCustomTheme(theme);

const admesh = new AdMeshSDK({ apiKey: process.env.REACT_APP_ADMESH_API_KEY });

await admesh.showRecommendations({
  query: 'best CRM software',
  containerId: 'admesh-recommendations',
  format: 'auto'
});
```

### Session Management

Your platform is responsible for creating and managing sessions. Use the static helper methods:

```tsx
const admesh = new AdMeshSDK({ apiKey: process.env.REACT_APP_ADMESH_API_KEY });

// Generate session ID
const sessionId = AdMeshSDK.createSession();

// Generate message ID for each query
const messageId = AdMeshSDK.createMessageId(sessionId);

// Pass to SDK
await admesh.showRecommendations({
  query: userQuery,
  containerId: 'recommendations',
  session_id: sessionId,
  message_id: messageId
});
```

---

## TypeScript Support

```typescript
import { AdMeshSDK } from 'admesh-ui-sdk';

const admesh = new AdMeshSDK({
  apiKey: process.env.REACT_APP_ADMESH_API_KEY
});

await admesh.showRecommendations({
  query: 'best CRM software',
  containerId: 'admesh-recommendations',
  format: 'auto'
});
```

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Recommendations Not Rendering">
    **Check:**
    - API key is valid and set in environment variables
    - `sessionId` prop is provided to `AdMeshProvider`
    - Messages array is not empty
    - Component is wrapped inside `AdMeshProvider`
  </Accordion>
  <Accordion title="Tracking Not Working">
    Tracking is automatic â€” do not manually fire pixels or modify tracking URLs. The SDK handles all tracking internally.
  </Accordion>
  <Accordion title="WeaveAdFormatContainer Not Detecting Links">
    Ensure:
    - Links are in the format: `[text](https://...useadmesh.com/...)`
    - Content is rendered before the component checks for links
    - `messageId` prop is provided
  </Accordion>
</AccordionGroup>

---
